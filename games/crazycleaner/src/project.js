__require=function e(t,o,n){function r(c,i){if(!o[c]){if(!t[c]){var l="function"==typeof __require&&__require;if(!i&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}var s=o[c]={exports:{}};t[c][0].call(s.exports,function(e){var o=t[c][1][e];return r(o||e)},s,s.exports,e,t,o,n)}return o[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({border:[function(e,t,o){"use strict";cc._RF.push(t,"11333njwDpG9Z9GxW4QcdNr","border"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.upBorder=null,t.downBorder=null,t}return __extends(t,e),t.prototype.start=function(){this.upBorder.position=cc.p(0,cc.winSize.height/2+this.upBorder.height/2),this.downBorder.position=cc.p(0,-(cc.winSize.height/2+this.downBorder.height/2))},__decorate([a(cc.Node)],t.prototype,"upBorder",void 0),__decorate([a(cc.Node)],t.prototype,"downBorder",void 0),t=__decorate([r],t)}(cc.Component);o.Border=c,cc._RF.pop()},{}],gameMain:[function(e,t,o){"use strict";cc._RF.push(t,"0a12dGQmxRHTLuqklOWjo+v","gameMain"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./player/player"),r=e("./itemManager"),a=e("./item"),c=e("./socketManager"),i=cc._decorator,l=i.ccclass,s=i.property,p=window.io||{},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.remotePlayer=null,t.players=[],t.playerRotateSpeed=80,t.playerMoveSpeed=cc.p(0,800),t}var o;return __extends(t,e),o=t,Object.defineProperty(t,"instance",{get:function(){return this._instance},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){var e=this;0===c.SocketManager.instance.order?(this.players[0]=this.player,this.players[1]=this.remotePlayer):(this.players[1]=this.player,this.players[0]=this.remotePlayer),this.player.score=0,this.remotePlayer.score=0,o._instance=this,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0,!0===c.SocketManager.instance.isMultiPlayer&&(console.log("room id: %d, my order: %d.",c.SocketManager.instance.roomID,c.SocketManager.instance.order),c.SocketManager.instance.queueSocket.close(),c.SocketManager.instance.roomSocket=p.connect(c.SocketManager.instance.roomurl+c.SocketManager.instance.roomID),c.SocketManager.instance.roomSocket.on("onTouchStart",function(t){e.remotePlayer.state==n.PlayerState.StandBy&&(e.remotePlayer.state=n.PlayerState.Running),e.remotePlayer.node.x=t.x,e.remotePlayer.node.y=t.y,e.remotePlayer.node.rotation=t.r}),c.SocketManager.instance.roomSocket.on("onTouchEnd",function(t){e.remotePlayer.state=n.PlayerState.StandBy,e.remotePlayer.node.x=t.x,e.remotePlayer.node.y=t.y,e.remotePlayer.node.rotation=t.r}),c.SocketManager.instance.roomSocket.on("createItem",function(e){r.ItemManager.instance.create(a.ItemType.little,cc.p(e.x,e.y))}),c.SocketManager.instance.roomSocket.on("scoreChange",function(t){e.players[t.index].score+=t.score}),0===c.SocketManager.instance.order?(this.player.node.position=cc.p(-110,0),this.remotePlayer.node.active=!0,this.remotePlayer.node.position=cc.p(110,0),this.remotePlayer.node.color=cc.Color.RED):(this.player.node.position=cc.p(110,0),this.remotePlayer.node.active=!0,this.remotePlayer.node.position=cc.p(-110,0),this.remotePlayer.node.color=cc.Color.RED),this.remotePlayer.label_score.node.active=!0)},t.prototype.start=function(){},t.prototype.update=function(e){},t.prototype.onTouchStart=function(){this.player.state==n.PlayerState.StandBy&&(this.player.state=n.PlayerState.Running),c.SocketManager.instance.isMultiPlayer&&c.SocketManager.instance.roomSocket.emit("onTouchStart",{x:this.player.node.x,y:this.player.node.y,r:this.player.node.rotation})},t.prototype.onTouchEnd=function(){this.player.state=n.PlayerState.StandBy,c.SocketManager.instance.isMultiPlayer&&c.SocketManager.instance.roomSocket.emit("onTouchEnd",{x:this.player.node.x,y:this.player.node.y,r:this.player.node.rotation})},t._instance=null,__decorate([s(n.Player)],t.prototype,"player",void 0),__decorate([s(n.Player)],t.prototype,"remotePlayer",void 0),__decorate([s(cc.Integer)],t.prototype,"playerRotateSpeed",void 0),__decorate([s(cc.Vec2)],t.prototype,"playerMoveSpeed",void 0),t=o=__decorate([l],t)}(cc.Component);o.GameMain=u,cc._RF.pop()},{"./item":"item","./itemManager":"itemManager","./player/player":"player","./socketManager":"socketManager"}],hall:[function(e,t,o){"use strict";cc._RF.push(t,"93008wCDO1GS6w5Q1bi2NLR","hall"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./socketManager"),r=cc._decorator,a=r.ccclass,c=r.property,i=window.io||{},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnNode=null,t.labelNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){n.SocketManager.instance.socket=i.connect(n.SocketManager.instance.server),n.SocketManager.instance.hallSocket=i.connect(n.SocketManager.instance.hallurl)},t.prototype.match=function(){var e=this;n.SocketManager.instance.hallSocket.close(),n.SocketManager.instance.queueSocket=i.connect(n.SocketManager.instance.queueurl),n.SocketManager.instance.queueSocket.on("setOrder",function(e){n.SocketManager.instance.order=e}),n.SocketManager.instance.queueSocket.on("matched",function(t){e.labelNode.getComponent(cc.Label).string="\u5339\u914d\u6210\u529f",n.SocketManager.instance.roomID=t,cc.director.loadScene("game")}),n.SocketManager.instance.queueSocket.on("noRoom",function(){console.log("\u6ca1\u6709\u7a7a\u95f2\u623f\u95f4, \u8fd4\u56de\u5927\u5385"),n.SocketManager.instance.hallSocket=i.connect(n.SocketManager.instance.hallurl),n.SocketManager.instance.queueSocket.close(),e.btnNode.active=!0,e.labelNode.active=!1}),this.btnNode.active=!1,this.labelNode.active=!0},__decorate([c(cc.Node)],t.prototype,"btnNode",void 0),__decorate([c(cc.Node)],t.prototype,"labelNode",void 0),t=__decorate([a],t)}(cc.Component);o.Hall=l,cc._RF.pop()},{"./socketManager":"socketManager"}],itemManager:[function(e,t,o){"use strict";cc._RF.push(t,"79364bus8pGCaQn0PA827ss","itemManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,c=e("./item"),i=e("./util"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemBigPrefab=null,t.itemLittlePrefab=null,t.items=[],t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){o.instance=this},t.prototype.start=function(){},t.prototype.update=function(e){},t.prototype.create=function(e,t){var o=null;switch(e){case c.ItemType.big:o=this.itemBigPrefab;break;case c.ItemType.little:o=this.itemLittlePrefab;break;case c.ItemType.block:}if(null===o)console.log("type error");else{var n=cc.instantiate(o);n.parent=this.node,n.position=t.add(cc.p(-cc.winSize.width/2,-cc.winSize.height/2)),this.items.push(n)}},t.prototype.getRandomPosition=function(e){for(var t=cc.p(i.Util.getRandomInteger(20,cc.winSize.width-20),i.Util.getRandomInteger(20,cc.winSize.height-20)),o=[],n=0;n<e;n++)o.push(i.Util.getRadomPointInCircle(t,20));return o},t.instance=null,__decorate([a(cc.Prefab)],t.prototype,"itemBigPrefab",void 0),__decorate([a(cc.Prefab)],t.prototype,"itemLittlePrefab",void 0),t=o=__decorate([r],t)}(cc.Component);o.ItemManager=l,cc._RF.pop()},{"./item":"item","./util":"util"}],item:[function(e,t,o){"use strict";cc._RF.push(t,"af8c6xj6WtNob7dcJCaFrFe","item"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./gameMain"),r=e("./socketManager"),a=cc._decorator,c=a.ccclass,i=a.property;o.ItemType=cc.Enum({big:0,little:1,block:2});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ItemType.little,t.player=null,t}return __extends(t,e),t.prototype.start=function(){this.node.zIndex=n.GameMain.instance.player.node.zIndex+1},t.prototype.beSucked=function(e){this.player=e,this.node.runAction(cc.sequence(cc.moveTo(.1,e.node.position),cc.callFunc(this.dead,this)))},t.prototype.dead=function(){this.node.destroy(),!1===this.player.isRemotePlayer&&(this.player.score++,r.SocketManager.instance.roomSocket.emit("scoreChange",{score:1,index:r.SocketManager.instance.order})),r.SocketManager.instance.roomSocket.emit("createItem")},__decorate([i({type:cc.Enum(o.ItemType)})],t.prototype,"type",void 0),t=__decorate([c],t)}(cc.Component);o.Item=l,cc._RF.pop()},{"./gameMain":"gameMain","./socketManager":"socketManager"}],loading:[function(e,t,o){"use strict";cc._RF.push(t,"db0ab+TNvNLX6d+W4obaWA0","loading"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progress=null,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.preloadScene("game",function(t,o){e.progress.progress=t/o},this.onSceneLoaded)},t.prototype.onSceneLoaded=function(e){cc.director.loadScene("game")},t.prototype.preloadScene=function(e,t,o){var n=cc.director._getSceneUuid(e);if(n)cc.director.emit(cc.Director.EVENT_BEFORE_SCENE_LAUNCH,e),cc.loader.load({uuid:n.uuid,type:"uuid"},t,function(t,n){t&&cc.errorID(1210,e,t.message),o&&o(t,n)});else{var r='Can not preload the scene "'+e+'" because it is not in the build settings.';o(new Error(r)),cc.error("preloadScene: "+r)}},__decorate([a(cc.ProgressBar)],t.prototype,"progress",void 0),t=__decorate([r],t)}(cc.Component);o.Loading=c,cc._RF.pop()},{}],menu:[function(e,t,o){"use strict";cc._RF.push(t,"17733SmsspCZpT9GQ7z+kSL","menu"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./socketManager"),r=cc._decorator,a=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.gameStart=function(){cc.director.loadScene("loading")},t.prototype.multiPlayer=function(){n.SocketManager.instance.isMultiPlayer=!0,cc.director.loadScene("hall")},t=__decorate([a],t)}(cc.Component));o.Menu=c,cc._RF.pop()},{"./socketManager":"socketManager"}],player:[function(e,t,o){"use strict";cc._RF.push(t,"74883TQN91McZz1BCmSUTJx","player"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../util"),r=e("../gameMain"),a=cc._decorator,c=a.ccclass,i=a.property;window.io;o.PlayerState=cc.Enum({JustStart:1,StandBy:2,Running:3});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arrow=null,t.velocity=cc.Vec2.ZERO,t._state=o.PlayerState.JustStart,t.isRemotePlayer=!1,t.label_score=null,t._score=0,t.index=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e,e==o.PlayerState.StandBy?this.arrow.active=!0:e==o.PlayerState.Running&&(this.arrow.active=!1,this.velocity=r.GameMain.instance.playerMoveSpeed.rotate(-n.Util.Angle2Radian(this.node.rotation)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e,this.label_score.string=e.toString()},enumerable:!0,configurable:!0}),t.prototype.update=function(e){this.state===o.PlayerState.Running?this.node.position=this.node.position.add(this.velocity.mul(e)):this.state===o.PlayerState.StandBy&&(this.node.rotation+=r.GameMain.instance.playerRotateSpeed*e,this.node.rotation>=360&&(this.node.rotation-=360))},t.prototype.onCollisionEnter=function(e){var t;console.log("player.oncollisionenter"),"hwall"===e.node.group?(t=cc.p(this.velocity.x,-this.velocity.y),this.node.rotation+=n.Util.Radian2Angle(this.velocity.signAngle(t)),this.velocity=t):"vwall"===e.node.group?(t=cc.p(-this.velocity.x,this.velocity.y),this.node.rotation+=n.Util.Radian2Angle(this.velocity.signAngle(t)),this.velocity=t):"player"===e.node.group&&this.velocity.mulSelf(-1)},__decorate([i(cc.Node)],t.prototype,"arrow",void 0),__decorate([i(cc.Boolean)],t.prototype,"isRemotePlayer",void 0),__decorate([i(cc.Label)],t.prototype,"label_score",void 0),t=__decorate([c],t)}(cc.Component);o.Player=l,cc._RF.pop()},{"../gameMain":"gameMain","../util":"util"}],socketManager:[function(e,t,o){"use strict";cc._RF.push(t,"db18aEtLQdPfZ1lPSFGUXwI","socketManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=(n.property,function(){function e(){this.isMultiPlayer=!1,this.socket=null,this.hallSocket=null,this.queueSocket=null,this.roomSocket=null,this.server="https://xlgames.cn:11235",this.hallurl="https://xlgames.cn:11235/hall",this.queueurl="https://xlgames.cn:11235/queue",this.roomurl="https://xlgames.cn:11235/rooms",this.order=0,this.roomID=0}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return null===this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),e._instance=null,e=t=__decorate([r],e)}());o.SocketManager=a,cc._RF.pop()},{}],sucker:[function(e,t,o){"use strict";cc._RF.push(t,"55c69owpPlKC5jLryNLamWF","sucker"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../item"),r=e("./player"),a=e("../gameMain"),c=cc._decorator,i=c.ccclass,l=c.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t}return __extends(t,e),t.prototype.onCollisionEnter=function(e){"item"===e.node.group&&(this.player.isRemotePlayer?(e.node.getComponent(n.Item).beSucked(a.GameMain.instance.remotePlayer),console.log("remotePlayer")):(e.node.getComponent(n.Item).beSucked(a.GameMain.instance.player),console.log("localPlayer")))},__decorate([l(r.Player)],t.prototype,"player",void 0),t=__decorate([i],t)}(cc.Component);o.Sucker=s,cc._RF.pop()},{"../gameMain":"gameMain","../item":"item","./player":"player"}],util:[function(e,t,o){"use strict";cc._RF.push(t,"e8996UgwfFJB7fRvOGFtxYJ","util"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=(n.property,function(){function e(){}var t;return t=e,e.Radian2Angle=function(e){return 180*e/Math.PI},e.Angle2Radian=function(e){return Math.PI/180*e},e.getRandomInteger=function(e,o){if(e==o)return e;if(e>o)return t.getRandomInteger(o,e);var n=o-e,r=Math.random();return e+Math.floor(r*n)},e.getRandomFloat=function(e,o){if(e==o)return e;if(e>o)return t.getRandomFloat(o,e);var n=o-e;return e+Math.random()*n},e.getRadomPointInCircle=function(e,o){var n=cc.p(0,t.getRandomFloat(0,o));return n.rotateSelf(t.getRandomFloat(0,2*Math.PI)),e.add(n)},e=t=__decorate([r],e)}());o.Util=a,cc._RF.pop()},{}]},{},["border","gameMain","hall","item","itemManager","loading","menu","player","sucker","socketManager","util"]);